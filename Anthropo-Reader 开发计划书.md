# 📱 Anthropo-Reader 开发计划书

## 1. 项目愿景

**Anthropo-Reader** 是一款专为工程背景用户设计的自动化信息聚合 App。它通过 GitHub Actions 与 LLM 语义分析，将海量杂乱的 GitHub 趋势与微信公众号内容，转化为结构化、可搜索、且具备 Claude 风格美感的 Markdown 日报。

------

## 2. 核心功能规范

- **视觉（Visuals）**：
  - **羊皮纸模式**：背景 `#FAF9F5`，字体 Lora (Serif)。
  - **极夜模式**：背景 `#141413`，文本高对比度。
- **抓取（Ingestion）**：
  - 支持关键词订阅，定时触发抓取任务。
  - 微信公众号文章自动转换为 Markdown（集成 GitHub 开源工具）。
- **智能（Intelligence）**：
  - AI 自动摘要：在进入阅读器前预览 300 字以内的核心逻辑。
  - 自动归档：基于语义的动态文件夹管理（Auto-Tagging）。
- **阅读（Reading）**：内置 Markdown 渲染引擎，支持代码高亮与公式。

------

## 3. 技术栈建议

- **前端**：Flutter (基于 Skia 引擎，确保跨平台视觉 100% 还原)。
- **后端/自动化**：GitHub Actions + Python。
- **数据库**：Supabase (PostgreSQL)，原生支持全文搜索。
- **AI 接口**：Claude 3.5 Sonnet API (用于摘要与标签分类)。

------

## 4. 分步开发路线图

### 第一阶段：自动化数据流流水线（后端优先）

- [ ] **Step 1.1**: 编写 Python 脚本，调用 GitHub API 获取关键词相关的 Trending 项目。
- [ ] **Step 1.2**: 集成 `wechat2md` 逻辑，通过 headless browser 或开源 API 抓取公众号正文。
- [ ] **Step 1.3**: 接入 Claude API。输入：文章原文；输出：JSON 格式（含摘要、3个建议标签、重要程度评分）。
- [ ] **Step 1.4**: 配置 GitHub Actions，设定每天凌晨自动运行脚本并将结果推送到 Supabase 数据库。

### 第二阶段：UI 框架与主题系统（视觉复刻）

- [ ] **Step 2.1**: Flutter 项目初始化，配置 `google_fonts` 引入 Lora 和 Poppins。
- [ ] **Step 2.2**: 实现“双色模式”切换引擎。定义全局常量色彩集，确保一键切换羊皮纸/纯黑主题。
- [ ] **Step 2.3**: 编写自定义卡片组件。卡片需包含：来源图标、标题、AI 摘要预览、自动生成的标签。

### 第三阶段：内置阅读器与归档逻辑（核心体验）

- [ ] **Step 3.1**: 集成 `flutter_markdown` 渲染插件，并针对代码块进行美化处理。
- [ ] **Step 3.2**: 开发“动态文件夹”页面。逻辑：查询数据库中所有 Unique Tags，点击标签进入对应的 Markdown 列表。
- [ ] **Step 3.3**: 实现“新标签自动创建”的通知 UI，增强 AI 交互感。

### 第四阶段：优化与发布（工程交付）

- [ ] **Step 4.1**: 性能优化。针对长篇 Markdown 文章实现懒加载，避免内存溢出。
- [ ] **Step 4.2**: 离线缓存处理。将已抓取的内容缓存在本地 SQLite 中，方便无网阅读。
- [ ] **Step 4.3**: 打包 APK/IPA，完成首个版本的个人部署。

------

## 5. 风险与对策

- **微信反爬风险**：若 IP 被封，考虑将抓取逻辑迁移至云函数的动态 IP 池，或采用手动触发的“一键转换”功能作为兜底方案。
- **摘要质量**：需不断调优 Prompt，确保 AI 生成的摘要不带有“AI 味”，而是像专业编辑一样精炼。